# Story 08-06: “工具调用”详情展示组件

> Epic: 消息气泡交互与快捷操作增强
> Priority: Low
> Points: 3

## 概述
为包含工具调用（Tool Calls）的 AI 消息提供查看入口，展示函数名称、参数及调用结果。

## 业务规则与技术限制
- **非持久化局限**：由于工具调用数据（Tool Calls/Events）目前未保存至后端数据库，仅在前端内存缓存（Store）中存在。
- **“最近”消息定义**：指当前页面加载后，通过 SSE 实时流式接收到的 AI 消息。
- **可见性失效**：一旦用户刷新页面或重新进入会话导致消息从后端加载，由于数据库不含工具调用相关详细字段，该功能入口将自动隐藏。

## 用户故事

### US-1: 调试工具调用
**作为** 用户（或开发者），
**我希望** 查看 AI 调用了什么工具以及具体的参数，
**以便** 排查为什么 AI 无法获取信息或确认其行为是否符合预期。

## 功能范围

### 包含
- 识别消息对象中是否包含 `tool_calls` 字段（通常来自前端 Store 缓存的消息扩展属性）。
- 若包含，在菜单中显示“查看工具调用”选项。
- 实现工具调用详情展示组件（支持 JSON 格式化高亮或树状视图）。
- 在模态弹窗中复用展示逻辑。

### 不包含（后续迭代）
- 复杂的工具调用可视化图表。
- 离线历史消息的工具调用查看（需后端持久化支持）。

## 验收标准

- [ ] AC-1: 只有当 AI 消息包含有效的 `tool_calls` 数据（存在于内存中）时，菜单才显示“查看工具调用”。
- [ ] AC-2: 当数据因页面刷新而丢失时，菜单自动隐藏此选项。
- [ ] AC-3: 点击选项弹出居中对话框。
- [ ] AC-4: 对话框中清晰展示函数名（Function Name）、输入参数（Arguments）和返回结果（Output/Content）。
- [ ] AC-5: JSON 数据应格式化显示，易于阅读。

## 依赖关系

### 前置依赖
- Story 08-01: 菜单基础结构。
- Story 08-05: 模态弹窗基础（可复用）。

### 被依赖（后续）
- 无
