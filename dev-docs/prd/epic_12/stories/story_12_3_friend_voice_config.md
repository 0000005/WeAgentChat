# Story 12-3: 好友语音个性化配置

> Epic: Epic 12: 语音消息能力
> Priority: Medium
> Points: 3

## 概述
本 Story 允许用户针对特定的 AI 好友开启语音回复功能，并为其指定专属音色。这使得不同的 AI 好友可以拥有不同的声音，增强角色的辨识度和沉浸感。

## 用户故事

### US-1: 开启好友语音
**作为** 用户，
**我希望** 在编辑好友资料时能打开“语音回复”开关，
**以便** 该好友以语音形式回复我的消息。

### US-2: 配置引导
**作为** 用户，
**我希望** 在我尝试开启语音但未配置全局 API Key 时收到提示，
**以便** 我知道需要先去设置中完成基础配置。

### US-3: 选择专属音色
**作为** 用户，
**我希望** 为该好友选择一个特定的音色，
**以便** 符合其人设（如为 elderly 角色选择苍老的声音）。

## 功能范围

### 包含
-   **编辑好友/创建好友弹窗**：新增“语音回复”包含开关（Toggle）和音色选择器。
-   **逻辑控制**：
    -   开关开启时，检查全局语音设置（Story 12-2）是否完整。若未配置，弹出提示引导跳转至设置界面。
    -   开关开启后，显示音色选择器。
-   **音色选择**：
    -   默认为“跟随系统”（使用全局默认音色）。
    -   列表展示所有可用音色，支持试听预览。
-   **数据存储**：在 `friends` 表或关联配置中存储 `enable_voice` (bool) 和 `voice_id` (string) 字段。

### 不包含
-   针对好友的语速、语调微调。
-   群聊中的特殊语音设置（群聊语音跟随好友个人设置）。

## 验收标准

- [ ] AC-1: “编辑好友”界面包含“语音回复”开关。
- [ ] AC-2: 若全局语音未配置，点击开关时弹出 Alert/Toast 提示，并引导去设置。
- [ ] AC-3: 开启开关后，可选择具体音色；关闭开关，音色选择项隐藏或禁用。
- [ ] AC-4: 配置保存后，在数据库中正确更新该好友的 `enable_voice` 和 `voice_id`。
- [ ] AC-5: 新建好友时，语音回复默认关闭。

## 依赖关系

### 前置依赖
- Story 12-2: 全局语音设置界面

### 被依赖（后续）
- Story 12-4: 语音消息回复流程 (使用此处的配置)
