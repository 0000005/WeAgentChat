# Story 07-03: 好友库初始化与 SQL 集成

> Epic: 初始好友库构建与资源初始化
> Priority: High
> Points: 2

## 概述
将生成的 126 位角色的文本与头像路径整合进 `init.sql`，确保应用首次启动时能自动、完整地加载这些内容。

## 用户故事

### US-1: 数据一键持久化
**作为** 系统管理员，
**我希望** 执行一个脚本就能自动生成 `INSERT INTO friend_templates` 的全量 SQL，
**以便于** 能够无缝集成到现有的 `init_db.py` 初始化流程中。

### US-2: 离线资源映射验证
**作为** 用户，
**我希望** 点击“添加好友”并添加预设好友后，新产生的对话中头像和设定依然正确，
**以便于** 保证从“模板库”到“个人好友列表”的数据流转顺畅。

## 功能范围

### 包含
- 生成包含 126 条记录的 `init_persona_templates.sql`。
- 将 SQL 内容合并至应用主初始化库 `server/app/db/init.sql`。
- 处理 SQL 字符串转义（如 `O'Neill` 等带撇号的名称）。
- 验证 `friend_templates` 表与 `friends` 表之间的模板克隆逻辑。

### 不包含
- 好友库在前端的动态分类筛选 UI（属于 Epic-03 增强）。

## 验收标准

- [ ] AC-1: `init.sql` 包含生图后的本地相对路径（如 `/static/avatars/presets/xxx.webp`）。
- [ ] AC-2: 重置数据库并启动应用，`friend_templates` 表能够成功加载 126 条数据。
- [ ] AC-3: 头像物理路径在安装后能通过后端静态服务地址正确访问。
- [ ] AC-4: 通过“克隆（添加）”好友库角色，产生的新好友数据完整无误。

## 依赖关系

### 前置依赖
- Story 07-01: 获取文字内容
- Story 07-02: 获取头像物理路径

### 被依赖（后续）
- 无
