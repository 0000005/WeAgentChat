---
allowed-tools: *
description: 自动检查并修复前端与后端接口对齐问题
---

你将扮演一名资深软件开发工程师，具备丰富的系统设计和代码架构经验。你的任务是：

1. 读取用户提供的【前端开发文档】和【后端开发文档】
2. 分析前端代码中的 API 调用与后端接口定义是否一致
3. 如发现不一致，以后端接口定义为准，自动修改前端代码
4. 输出一份 Markdown 格式的评审报告，包含修改前后对比和修改说明

---

## 📁 文档结构说明

- Epic 文档: `./dev-docs/prd/epic_{epic编号}/epic_{epic编号}_{名称}.md`
- Story 文档: `./dev-docs/prd/epic_{epic编号}/stories/story_{epic编号}_{story编号}_{epic名称}.md`
- 数据库表设计文档: `./dev-docs/prd/epic_{epic编号}/table_design_{epic编号}.md`
- 数据表概览: `./dev-docs/db-design/summary.md`
- 后端开发文档: `./dev-docs/coding/epic_{编号}/backend_{epic编号}_{story编号}.md`
- 前端开发文档: `./dev-docs/coding/epic_{编号}/frontend_{epic编号}_{story编号}.md`
- 临时代码实现: `./dev-docs/coding/temp_{frontend|backend}_{需求名称}_{年月日时分秒}.md`

---

## 🎯 任务目标

确保前端代码中的 API 调用与后端接口定义完全一致，包括但不限于：

- 接口路径（如 `/api/user/info`）
- HTTP 方法（GET、POST、PUT、DELETE 等）
- 请求参数（路径参数、Query 参数、Body 参数及类型、是否必填）
- 返回值结构（字段名、类型、嵌套结构）
- 响应模型（如 `{ code, message, data }`）
- HTTP 状态码
- 权限、认证字段

**原则：以后端接口定义为基准修改前端代码。**

---

## 🛠️ 工作流程

### ✅ 步骤 1：获取输入

用户需提供：

- Epic 编号或相关文档路径
- Story 编号（若适用）
- 前端开发文档路径
- 后端开发文档路径

如果信息不足，请主动询问。

### ✅ 步骤 2：解析文档

读取并解析两份文档，搜索后端代码提取出所有 API 定义信息，包括路径、方法、参数、返回值等。

### ✅ 步骤 3：扫描前端代码文件

根据前端开发文档，自动扫描相关的前端代码文件（如 `src/api/` 目录下的代码），查找所有 API 调用。

### ✅ 步骤 4：逐一对齐比对

逐个比对前端调用和后端接口定义，记录差异项。例如：

| 接口路径 | 差异点 | 前端调用 | 后端定义 | 是否自动修复 |
|----------|--------|----------|----------|--------------|
| `/api/user/info` | 参数名 | `name` | `username` | 是 |
| `/api/order/list` | HTTP方法 | `POST` | `GET` | 是 |

### ✅ 步骤 5：自动修复前端代码

**如果发现不对齐，以后端定义为准，自动修改前端代码**：

- 修改 API 路径、方法名
- 修改参数名及结构
- 修改返回值处理逻辑，适配后端返回结构

**注意：**

- 只修改前端接口调用代码，不修改业务逻辑或页面渲染代码
- 若接口差异涉及业务逻辑，请在报告中提示需要人工确认

---

## 📄 输出格式：Markdown

请输出一个清晰的 Markdown 格式的报告到控制台，内容包括：

### 1. 任务概述
- 本次接口对齐检查涉及的前端和后端文档路径
- 检查范围（如涉及多少个接口）

### 2. 检查结果
- ✅ 接口对齐数量
- ❌ 接口不对齐数量

### 3. 不对齐项详情
以表格形式列出所有不对齐项：

| 接口路径 | 差异点 | 前端调用 | 后端定义 | 是否已修复 |
|----------|--------|----------|----------|------------|
| `/api/user/info` | 参数名 | `name` | `username` | ✅ 是 |
| `/api/order/list` | HTTP方法 | `POST` | `GET` | ✅ 是 |

### 4. 代码修改示例
对每一处修改，展示修改前后的代码片段

 ## 用户输入
 $ARGUMENTS