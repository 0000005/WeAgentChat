---
allowed-tools: *
description: 生成产品需求 story（用户故事）
---

## 目录规范

- epic 存放在 `./dev-docs/prd/epic_{epic编号}/epic_{epic编号}_{名称}.md`文件中。
- story 存放在 `./dev-docs/prd/epic_{epic编号}/stories/story_{epic编号}_{story编号}_{epic名称}.md`文件中。

## 核心原则

### INVEST 原则
生成的 Story 必须遵循 INVEST 原则：
- **I**ndependent（独立）：Story 尽量独立，减少与其他 Story 的依赖
- **N**egotiable（可协商）：Story 不是契约，细节可以协商
- **V**aluable（有价值）：Story 必须对用户有价值
- **E**stimable（可估算）：Story 应该能够被估算工作量
- **S**mall（小）：Story 应该足够小，能在一个迭代内完成
- **T**estable（可测试）：Story 有明确的验收标准

### Story 范围控制
**Story 应该聚焦于"做什么"和"为什么"，而不是"怎么做"。**

✅ Story 应该包含：
- 清晰的功能描述和业务价值
- 用户故事（As a... I want... So that...）
- 简明的验收标准（3-8条）
- 功能边界（包含什么、不包含什么）
- 前置/后续依赖关系

❌ Story 不应该包含：
- 完整的代码实现
- 详细的 API 接口定义（除非是 API 类 Story）
- 精确到像素的 UI 规格
- Store/组件的完整代码结构
- 技术架构决策细节
- 超过10条的验收标准

### 长度控制
- 每个 Story 控制在 **100-200 行** 以内
- 验收标准控制在 **3-8 条**
- 用户故事控制在 **2-4 个**

## Story 模板

```markdown
# Story {编号}: {功能名称}

> Epic: {Epic名称}
> Priority: {High/Medium/Low}
> Points: {估算点数，可选}

## 概述
简明扼要地描述这个 Story 要实现什么功能，以及它的业务价值。（2-3句话）

## 用户故事

### US-1: {故事标题}
**作为** {用户角色}，
**我希望** {做什么}，
**以便** {获得什么价值}。

### US-2: ...

## 功能范围

### 包含
- 功能点1
- 功能点2

### 不包含（后续迭代）
- 功能点A
- 功能点B

## 验收标准

- [ ] AC-1: {具体的、可验证的标准}
- [ ] AC-2: ...
- [ ] AC-3: ...

## 依赖关系

### 前置依赖
- Story XX-XX: {依赖描述}

### 被依赖（后续）
- Story XX-XX: {依赖描述}

## 备注（可选）
任何需要开发者注意的事项，但不涉及具体实现细节。
```

## 工作流程

1. **分析 Epic**：阅读并理解用户提供的 Epic 文档
2. **拆分 Story**：按功能模块拆分为多个 Story，每个 Story 应该是一个完整的用户可感知的功能单元
3. **编写 Story**：按照上述模板和原则编写每个 Story，**严格控制长度和详细程度**
4. **评审优化**：检查是否有过多的技术细节，如有则删除或简化
5. **整理编号**：确保 Story 编号有序，依赖关系清晰

## 常见错误（必须避免）

1. ❌ 在 Story 中写完整的代码示例
2. ❌ 定义详细的 API 请求/响应格式（除非这是专门的 API Story）
3. ❌ 写完整的 Pinia Store 结构
4. ❌ 定义精确到 px 的 CSS 规格
5. ❌ 验收标准超过 10 条
6. ❌ Story 超过 200 行
7. ❌ 把"怎么实现"和"做什么"混在一起

## 用户输入
$ARGUMENTS