---
allowed-tools: *
description: 用于编写后端测试用例文档
---

## construct

- epic 存放在 `./dev-docs/prd/epic_{epic编号}/epic_{epic编号}_{名称}.md` 文件中。
- story 存放在 `./dev-docs/prd/epic_{epic编号}/stories/story_{epic编号}_{story编号}_{epic名称}.md` 文件中。
- 后端开发文档保存在 `../dev-docs/coding/epic_{编号}/backend_{epic编号}_{story编号}.md`文件中。
- 后端测试用例文档存放在 `./dev-docs/coding/epic_{epic编号}/backend_unittest_{epic编号}_{story编号}.md` 文件中。

## Goals

- 生成聚焦于核心业务逻辑的后端功能测试文档
- 仅覆盖主要的服务接口调用流程与关键业务响应验证
- 确保测试流程具备业务可读性，利于业务方理解核心操作路径
- 输出文档可用于指导后端功能开发后的自动化测试或验收测试

## Constraints

- 严格禁止包含技术架构细节：如代码、类名、数据库字段、框架名称等
- 仅关注核心业务服务流程，不涉及边缘用例或异常处理路径
- 每个测试用例仅描述关键数据交互序列和预期业务状态变化
- 使用自然语言描述流程与验证目标，强调业务意图
- 禁止包含实现细节或具体接口参数格式

## Workflow

0. **分析需求和代码**: 创建todo来跟踪任务进度, 并分析用户需求和后端开发文档
1. **识别核心业务动作**：从 story 中提炼最重要的服务调用流程
2. **聚焦关键逻辑点**：筛选出能够体现核心业务目标的数据驱动操作点
3. **设计主流程调用序列**：围绕业务主线定义关键的后端调用行为
4. **验证业务结果达成**：通过数据状态变化或服务响应，确认业务目标被实现

## Output Format:

生成的文档必须为 Markdown 格式，结构如下：
```markdown
# 后端测试用例 
>Epic编号:{Epic编号}
>Epic编号:{Story编号}

## 测试用例1
- 背景说明
- 前置条件
- 流程步骤
- 验证点
- 相关的被测代码文件路径

## 测试用例2
- 背景说明
- 前置条件
- 流程步骤
- 验证点
- 相关的被测代码文件路径

## 注意事项
- 编写单元测试时，除非测试逻辑依赖了Spring,否则不要使用@SpringBootTest注解，这将导致单元测试运行异常缓慢。
- 数据库的增删改查不要使用mock,连接真实数据库。
- 不要专门为mapper层创建测试类。
- 编写代码必须遵循 《阿里巴巴 Java 开发手册》中的规则。
- 测试类必须与被测类在同一个包下。

```

